<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YASK: yask::yk_factory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">YASK
   </div>
   <div id="projectbrief">Yet Another Stencil Kit: a software framework for creating HPC stencil code. Copyright 2014-2019 Intel Corporation.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>yask</b></li><li class="navelem"><a class="el" href="classyask_1_1yk__factory.html">yk_factory</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classyask_1_1yk__factory-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">yask::yk_factory Class Reference<div class="ingroups"><a class="el" href="group__yk.html">YASK Kernel</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Bootstrap factory to create a stencil solution.  
 <a href="classyask_1_1yk__factory.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="yask__kernel__api_8hpp_source.html">yask_kernel_api.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a049d5803312219e78797cced8aca0b9a"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classyask_1_1yk__factory.html#a049d5803312219e78797cced8aca0b9a">get_version_string</a> ()</td></tr>
<tr class="memdesc:a049d5803312219e78797cced8aca0b9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Version information.  <br /></td></tr>
<tr class="separator:a049d5803312219e78797cced8aca0b9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afccc05b0095d99f89b7164b603b53d00"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="group__yk.html#ga8dc62f5599d5c5eb9f7583d7d6a63df1">yk_env_ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classyask_1_1yk__factory.html#afccc05b0095d99f89b7164b603b53d00">new_env</a> () const</td></tr>
<tr class="memdesc:afccc05b0095d99f89b7164b603b53d00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an object to hold environment information.  <br /></td></tr>
<tr class="separator:afccc05b0095d99f89b7164b603b53d00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24dd8e71c888730cb701b6232329e4ec"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="group__yk.html#ga8dc62f5599d5c5eb9f7583d7d6a63df1">yk_env_ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classyask_1_1yk__factory.html#a24dd8e71c888730cb701b6232329e4ec">new_env</a> (MPI_Comm comm) const</td></tr>
<tr class="memdesc:a24dd8e71c888730cb701b6232329e4ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="classyask_1_1yk__env.html">yk_env</a> object using the provided MPI communicator.  <br /></td></tr>
<tr class="separator:a24dd8e71c888730cb701b6232329e4ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a755b1bfc0dd9bfddfe80d924a188b350"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="group__yk.html#ga2debaa7135bb46dfc295ca623bee2876">yk_solution_ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classyask_1_1yk__factory.html#a755b1bfc0dd9bfddfe80d924a188b350">new_solution</a> (<a class="el" href="group__yk.html#ga8dc62f5599d5c5eb9f7583d7d6a63df1">yk_env_ptr</a> env) const</td></tr>
<tr class="memdesc:a755b1bfc0dd9bfddfe80d924a188b350"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a stencil solution.  <br /></td></tr>
<tr class="separator:a755b1bfc0dd9bfddfe80d924a188b350"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43d6b5b6a88c7e4f14e41997b22501f0"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="group__yk.html#ga2debaa7135bb46dfc295ca623bee2876">yk_solution_ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classyask_1_1yk__factory.html#a43d6b5b6a88c7e4f14e41997b22501f0">new_solution</a> (<a class="el" href="group__yk.html#ga8dc62f5599d5c5eb9f7583d7d6a63df1">yk_env_ptr</a> env, const <a class="el" href="group__yk.html#ga2debaa7135bb46dfc295ca623bee2876">yk_solution_ptr</a> source) const</td></tr>
<tr class="memdesc:a43d6b5b6a88c7e4f14e41997b22501f0"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>[Advanced]</b> Create a stencil solution by copying the settings from another.  <br /></td></tr>
<tr class="separator:a43d6b5b6a88c7e4f14e41997b22501f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Bootstrap factory to create a stencil solution. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a049d5803312219e78797cced8aca0b9a" name="a049d5803312219e78797cced8aca0b9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a049d5803312219e78797cced8aca0b9a">&#9670;&#160;</a></span>get_version_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string yask::yk_factory::get_version_string </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Version information. </p>
<dl class="section return"><dt>Returns</dt><dd>String describing the current version. </dd></dl>

</div>
</div>
<a id="afccc05b0095d99f89b7164b603b53d00" name="afccc05b0095d99f89b7164b603b53d00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afccc05b0095d99f89b7164b603b53d00">&#9670;&#160;</a></span>new_env() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="group__yk.html#ga8dc62f5599d5c5eb9f7583d7d6a63df1">yk_env_ptr</a> yask::yk_factory::new_env </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create an object to hold environment information. </p>
<p>Performs the following initialization steps:</p><ul>
<li>Initializes MPI if MPI is enabled but not yet initialized. Does not initialize MPI if MPI is not enabled or already initialized. If MPI is enabled, uses <code>MPI_COMM_WORLD</code> as the communicator.</li>
<li>Sets flush-to-zero (FTZ) and denormals-are-zero (DAZ) floating-point controls.</li>
<li>Enables "hot teams" mode for Intel OpenMP. Initializes OpenMP library if it is not already started. If it is already started, note that the "hot teams" mode may not get set correctly. This mode is important for optimal performance of nested OpenMP regions (used when the number of threads per block is greater than one).</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>If you initialize MPI before calling this function, you should call <code>MPI_Init_thread(..., MPI_THREAD_SERIALIZED, ...)</code> or <code>MPI_Init_thread(..., MPI_THREAD_MULTIPLE, ...)</code>.</dd>
<dd>
If you initialize OpenMP (by calling any OpenMP function) before calling this function, set the following environment variables prior to initializing OpenMP: <code>KMP_HOT_TEAMS_MODE=</code> and <code>KMP_HOT_TEAMS_MAX_LEVEL=2</code>.</dd></dl>
<p>Environment info is kept in a separate object to factilitate initializing the environment before creating a solution and sharing an environment among multiple solutions. </p><dl class="section return"><dt>Returns</dt><dd>Pointer to new env object. </dd></dl>

</div>
</div>
<a id="a24dd8e71c888730cb701b6232329e4ec" name="a24dd8e71c888730cb701b6232329e4ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24dd8e71c888730cb701b6232329e4ec">&#9670;&#160;</a></span>new_env() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="group__yk.html#ga8dc62f5599d5c5eb9f7583d7d6a63df1">yk_env_ptr</a> yask::yk_factory::new_env </td>
          <td>(</td>
          <td class="paramtype">MPI_Comm&#160;</td>
          <td class="paramname"><em>comm</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a <a class="el" href="classyask_1_1yk__env.html">yk_env</a> object using the provided MPI communicator. </p>
<p>Behaves like <a class="el" href="classyask_1_1yk__factory.html#afccc05b0095d99f89b7164b603b53d00" title="Create an object to hold environment information.">new_env()</a>, but uses the provided MPI communicator instead of using <code>MPI_COMM_WORLD</code>. MPI must be enabled and initialized before calling this function following the usage notes for <a class="el" href="classyask_1_1yk__factory.html#afccc05b0095d99f89b7164b603b53d00" title="Create an object to hold environment information.">new_env()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>#<code>include "mpi.h"</code> should precede #<code>include "yask_kernel_api.hpp"</code> to ensure proper MPI type definitions. </dd></dl>

</div>
</div>
<a id="a755b1bfc0dd9bfddfe80d924a188b350" name="a755b1bfc0dd9bfddfe80d924a188b350"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a755b1bfc0dd9bfddfe80d924a188b350">&#9670;&#160;</a></span>new_solution() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="group__yk.html#ga2debaa7135bb46dfc295ca623bee2876">yk_solution_ptr</a> yask::yk_factory::new_solution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__yk.html#ga8dc62f5599d5c5eb9f7583d7d6a63df1">yk_env_ptr</a>&#160;</td>
          <td class="paramname"><em>env</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a stencil solution. </p>
<p>A stencil solution contains all the vars and equations that were created during stencil compilation. </p><dl class="section return"><dt>Returns</dt><dd>Pointer to new solution object. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">env</td><td>Pointer to env info. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a43d6b5b6a88c7e4f14e41997b22501f0" name="a43d6b5b6a88c7e4f14e41997b22501f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43d6b5b6a88c7e4f14e41997b22501f0">&#9670;&#160;</a></span>new_solution() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="group__yk.html#ga2debaa7135bb46dfc295ca623bee2876">yk_solution_ptr</a> yask::yk_factory::new_solution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__yk.html#ga8dc62f5599d5c5eb9f7583d7d6a63df1">yk_env_ptr</a>&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__yk.html#ga2debaa7135bb46dfc295ca623bee2876">yk_solution_ptr</a>&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><b>[Advanced]</b> Create a stencil solution by copying the settings from another. </p>
<p>All the settings that were specified via the <code>yk_solution::set_*()</code> functions in the source solution will be copied to the new solution. This does <em>not</em> copy any vars, var settings, or var data; see <a class="el" href="classyask_1_1yk__solution.html#a563794842445fcd96d77b463f674a60b" title="[Advanced] Merge YASK variables with another solution.">yk_solution::fuse_vars()</a>. </p><dl class="section return"><dt>Returns</dt><dd>Pointer to new solution object. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">env</td><td>Pointer to env info.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">source</td><td>Pointer to existing <a class="el" href="classyask_1_1yk__solution.html">yk_solution</a> from which the settings will be copied. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="yask__kernel__api_8hpp_source.html">yask_kernel_api.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
